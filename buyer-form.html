<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>آگهی‌های مواد اولیه</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Vazirmatn&display=swap">
  <style>
    body {
      font-family: 'Vazirmatn', sans-serif;
      direction: rtl;
      margin: 0;
      background-color: #f5f5f5;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background-color: #fff;
      padding: 10px 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .logo-container {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-container img {
      height: 40px;
    }

    .location-select {
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 4px;
    }

    .search-bar {
      display: flex;
      align-items: center;
      flex: 1;
      margin: 0 20px;
      max-width: 500px;
      background-color: #eee;
      border-radius: 5px;
      overflow: hidden;
    }

    .search-bar input {
      flex: 1;
      border: none;
      padding: 10px;
      outline: none;
      background: transparent;
    }

    .search-bar button {
      border: none;
      background-color: transparent;
      padding: 10px;
      cursor: pointer;
    }

    .search-bar i {
      font-size: 18px;
      color: #666;
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .icon {
      cursor: pointer;
      position: relative;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .icon-menu {
      display: none;
      position: absolute;
      top: 30px;
      right: 0;
      background: white;
      border: 1px solid #ccc;
      border-radius: 5px;
      width: 150px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      z-index: 999;
    }

    .icon-menu a {
      display: block;
      padding: 10px;
      text-decoration: none;
      color: #333;
    }

    .icon:hover .icon-menu {
      display: block;
    }

    .icon-fallback {
      display: none;
      font-size: 14px;
    }

    .icon i:not(.fas) + .icon-fallback {
      display: inline;
    }

    .container {
      display: flex;
      margin-top: 20px;
    }

    .sidebar {
      width: 250px;
      padding: 20px;
      background: #fff;
      border-left: 1px solid #ddd;
    }

    .filter {
      margin-bottom: 20px;
    }

    .filter label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }

    .filter input, .filter select {
      width: 100%;
      padding: 7px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    .status-filter {
      display: flex;
      gap: 10px;
      justify-content: space-between;
    }

    .status-filter button {
      flex: 1;
      padding: 7px;
      border: 1px solid #ccc;
      border-radius: 4px;
      background: #f5f5f5;
      cursor: pointer;
      transition: background 0.2s;
    }

    .status-filter button.active {
      background: #1e88e5;
      color: white;
      border-color: #1e88e5;
    }

    .apply-filter-btn {
      width: 100%;
      padding: 10px;
      background-color: #1e88e5;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }

    .main-content {
      flex: 1;
      padding: 20px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
    }

    .ad-card {
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: transform 0.3s ease;
    }

    .ad-card:hover {
      transform: scale(1.05) rotate(1deg);
    }

    .ad-card img {
      width: 100%;
      height: 150px;
      object-fit: cover;
    }

    .ad-content {
      padding: 10px;
    }

    .ad-title {
      font-weight: bold;
      margin-bottom: 5px;
    }

    .btn-post {
      background-color: #1e88e5;
      color: white;
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      margin: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<header>
  <div class="logo-container">
    <img src="logo-fa.png" alt="لوگو فارسی">
    <img src="logo-en.png" alt="English Logo">
    <select class="location-select">
      <option>تهران</option>
      <option>اصفهان</option>
      <option>مشهد</option>
      <option>شیراز</option>
    </select>
  </div>

  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="جستجو بر اساس نام محصول یا شرکت...">
    <button onclick="filterAds()"><i class="fas fa-search"></i></button>
  </div>

  <div class="header-actions">
    <div class="icon">
      <i class="fas fa-user-circle fa-lg"></i>
      <span class="icon-fallback">حساب کاربری</span>
      <div class="icon-menu">
        <a href="#">پروفایل</a>
        <a href="#">تنظیمات</a>
        <a href="#">آگهی‌های من</a>
        <a href="#">خروج</a>
      </div>
    </div>
    <div class="icon">
      <i class="fas fa-headset fa-lg" onclick="window.location.href='support.html'"></i>
      <span class="icon-fallback">پشتیبانی</span>
    </div>
    <button class="btn-post" onclick="window.location.href='supplier_form.html'">ثبت ماده اولیه / محصول</button>
  </div>
</header>

<div class="container">
  <div class="sidebar">
    <div class="filter">
      <label>دسته‌بندی صنعت</label>
      <select id="industryFilter">
        <option value="">همه صنایع</option>
        <option value="پتروشیمی">پتروشیمی</option>
        <option value="فلزات">فلزات</option>
        <option value="چوب">چوب</option>
        <option value="دارویی">دارویی</option>
      </select>
    </div>

    <div class="filter">
      <label>نام برند</label>
      <input type="text" id="brandFilter">
    </div>

    <div class="filter">
      <label>حداکثر قیمت (تومان)</label>
      <input type="number" id="priceFilter">
    </div>

    <div class="filter">
      <label>حداقل سفارش (کیلوگرم)</label>
      <input type="number" id="minOrderFilter">
    </div>

    <div class="filter">
      <label>محل انبار</label>
      <select id="locationFilter">
        <option value="">همه مکان‌ها</option>
        <option value="تهران">تهران</option>
        <option value="اصفهان">اصفهان</option>
        <option value="شیراز">شیراز</option>
        <option value="مشهد">مشهد</option>
      </select>
    </div>

    <div class="filter">
      <label>وضعیت موجودی</label>
      <select id="stockFilter">
        <option value="">همه</option>
        <option value="در انبار">در انبار</option>
        <option value="ناموجود">ناموجود</option>
        <option value="در حال تولید">در حال تولید</option>
      </select>
    </div>

    <div class="filter">
      <label>نوع بسته‌بندی</label>
      <select id="packagingFilter">
        <option value="">همه</option>
        <option value="کیسه">کیسه</option>
        <option value="بشکه">بشکه</option>
        <option value="پالت">پالت</option>
        <option value="فله">فله</option>
      </select>
    </div>

    <div class="filter">
      <label>وضعیت آگهی</label>
      <div class="status-filter">
        <button class="status-btn active" data-status="all">همه</button>
        <button class="status-btn" data-status="with-image">عکس‌دار</button>
        <button class="status-btn" data-status="urgent">فوری</button>
      </div>
    </div>

    <button class="apply-filter-btn" onclick="filterAds()">اعمال فیلتر</button>
  </div>

  <div class="main-content" id="adsContainer">
    <!-- آگهی‌ها به صورت داینامیک اضافه می‌شن -->
  </div>
</div>

<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<script>
  const ads = Array.from({ length: 40 }, (_, i) => ({
    name: `ماده اولیه ${i + 1}`,
    brand: ['آریا', 'نفتان', 'متانول', 'پلی‌اتیلن'][i % 4],
    price: 10000 + i * 300,
    minOrder: 100 + (i * 10),
    industry: ['پتروشیمی', 'چوب', 'فلزات', 'دارویی'][i % 4],
    image: (i % 3 !== 0) ? `https://picsum.photos/seed/${i}/300/200` : null,
    isUrgent: (i % 5 === 0),
    location: ['تهران', 'اصفهان', 'شیراز', 'مشهد'][i % 4],
    stock: ['در انبار', 'ناموجود', 'در حال تولید'][i % 3],
    packaging: ['کیسه', 'بشکه', 'پالت', 'فله'][i % 4]
  }));

  let currentStatusFilter = 'all';

  function renderAds(filtered = ads) {
    const container = document.getElementById('adsContainer');
    container.innerHTML = '';
    filtered.forEach(ad => {
      const card = document.createElement('div');
      card.className = 'ad-card';
      if (ad.image) {
        card.innerHTML = `
          <img src="${ad.image}" alt="${ad.name}">
          <div class="ad-content">
            <div class="ad-title">${ad.name}${ad.isUrgent ? ' (فوری)' : ''}</div>
            <div>برند: ${ad.brand}</div>
            <div>قیمت: ${ad.price.toLocaleString()} تومان</div>
            <div>حداقل سفارش: ${ad.minOrder} کیلو</div>
            <div>صنعت: ${ad.industry}</div>
            <div>محل انبار: ${ad.location}</div>
            <div>وضعیت موجودی: ${ad.stock}</div>
            <div>بسته‌بندی: ${ad.packaging}</div>
          </div>
        `;
      } else {
        card.innerHTML = `
          <div class="ad-content">
            <div class="ad-title">${ad.name}${ad.isUrgent ? ' (فوری)' : ''}</div>
            <div>برند: ${ad.brand}</div>
            <div>قیمت: ${ad.price.toLocaleString()} تومان</div>
            <div>حداقل سفارش: ${ad.minOrder} کیلو</div>
            <div>صنعت: ${ad.industry}</div>
            <div>محل انبار: ${ad.location}</div>
            <div>وضعیت موجودی: ${ad.stock}</div>
            <div>بسته‌بندی: ${ad.packaging}</div>
          </div>
        `;
      }
      container.appendChild(card);
    });
  }

  function filterAds() {
    const industry = document.getElementById('industryFilter').value;
    const brand = document.getElementById('brandFilter').value.toLowerCase();
    const maxPrice = parseInt(document.getElementById('priceFilter').value);
    const minOrder = parseInt(document.getElementById('minOrderFilter').value);
    const location = document.getElementById('locationFilter').value;
    const stock = document.getElementById('stockFilter').value;
    const packaging = document.getElementById('packagingFilter').value;
    const search = document.getElementById('searchInput').value.toLowerCase();

    const filtered = ads.filter(ad => {
      const matchesIndustry = !industry || ad.industry === industry;
      const matchesBrand = !brand || ad.brand.toLowerCase().includes(brand);
      const matchesPrice = !isNaN(maxPrice) ? ad.price <= maxPrice : true;
      const matchesMinOrder = !isNaN(minOrder) ? ad.minOrder >= minOrder : true;
      const matchesLocation = !location || ad.location === location;
      const matchesStock = !stock || ad.stock === stock;
      const matchesPackaging = !packaging || ad.packaging === packaging;
      const matchesStatus = 
        currentStatusFilter === 'all' ? true :
        currentStatusFilter === 'with-image' ? ad.image :
        currentStatusFilter === 'urgent' ? ad.isUrgent : true;
      const matchesSearch = ad.name.toLowerCase().includes(search) || ad.brand.toLowerCase().includes(search);

      return matchesIndustry && matchesBrand && matchesPrice && matchesMinOrder && matchesLocation && matchesStock && matchesPackaging && matchesStatus && matchesSearch;
    });

    renderAds(filtered);
  }

  document.querySelectorAll('.status-btn').forEach(button => {
    button.addEventListener('click', () => {
      document.querySelectorAll('.status-btn').forEach(btn => btn.classList.remove('active'));
      button.classList.add('active');
      currentStatusFilter = button.dataset.status;
    });
  });

  renderAds();
</script>

</body>
</html>